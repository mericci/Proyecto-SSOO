% Plantilla para documentos LaTeX para enunciados
% Por Pedro Pablo Aste Kompen - ppaste@uc.cl
% Licencia Creative Commons BY-NC-SA 3.0
% http://creativecommons.org/licenses/by-nc-sa/3.0/

\documentclass[12pt]{article}

% Margen de 1 pulgada por lado
\usepackage{fullpage}
% Incluye gráficas
\usepackage{graphicx}
% Packages para matemáticas, por la American Mathematical Society
\usepackage{amssymb}
\usepackage{amsmath}
% Desactivar hyphenation
\usepackage[none]{hyphenat}
% Saltar entre párrafos - sin sangrías
\usepackage{parskip}
% Español y UTF-8
\usepackage[english]{babel}
\usepackage[utf8]{inputenc}
% Links en el documento
\usepackage{hyperref}
\usepackage{fancyhdr}
\setlength{\headheight}{15.2pt}
\setlength{\headsep}{5pt}
\pagestyle{fancy}

\newcommand{\N}{\mathbb{N}}
\newcommand{\Exp}[1]{\mathcal{E}_{#1}}
\newcommand{\List}[1]{\mathcal{L}_{#1}}
\newcommand{\EN}{\Exp{\N}}
\newcommand{\LN}{\List{\N}}

\newcommand{\comment}[1]{}
\newcommand{\lb}{\\~\\}
\newcommand{\eop}{_{\square}}
\newcommand{\hsig}{\hat{\sigma}}
\newcommand{\ra}{\rightarrow}
\newcommand{\lra}{\leftrightarrow}

% Cambiar por nombre completo + número de alumno
\newcommand{\alumno}{Grupo Maniha}
\rhead{Documentacion - \alumno}

\begin{document}
\thispagestyle{empty}
% Membrete
% PUC-ING-DCC-IIC1103
\begin{minipage}{2.3cm}
\includegraphics[width=2cm]{img/logo.pdf}
\vspace{0.5cm} % Altura de la corona del logo, así el texto queda alineado verticalmente con el círculo del logo.
\end{minipage}
\begin{minipage}{\linewidth}
\textsc{\raggedright \footnotesize
Pontificia Universidad Católica de Chile \\
Departamento de Ciencia de la Computación \\
IIC2333 - Sistemas Operativos y Redes \\}
\end{minipage}


% Titulo
\begin{center}
\vspace{0.5cm}
{\huge\bf Documentación Proyecto Sistemas Operativos}\\
\vspace{0.2cm}
\today\\
\vspace{0.2cm}
\footnotesize{2º semestre 2019 - Profesor Cristián Ruz}\\
\vspace{0.2cm}
\footnotesize{\alumno}
\rule{\textwidth}{0.05mm}
\end{center}

\section{Funciones Generales}
Funciones definidas como generales en el enunciado y se encuentran en "cr\_API.c".

\subsection{cr\_mount(char* diskname)}
Función que recibe la ruta local hacia el disco que se quiere utilizar. 

Se levantan dos errores y se finaliza la ejecución del programa en caso de que la ruta entregada no sea correcta o que el archivo objetivo no sea un archivo con extension binaria (".bin") como espera.

Retorna el puntero a la posición local del archivo ".bin" (nuestro disco virtual) a una variable global definida en "cr\_API.h" llamada "DISK\_PATH".

\subsection{cr\_exist(char* path}
Función que recibe el ruta absoluta desde el directorio root.

Utiliza la función $recorrer\_path$ para saber si existe un directorio o archivo en la ruta especificada en la ruta entregada.

Retorna 1 si existe y 0 en caso contrario

\subsection{cr\_ls(char* path)}
Función que recibe el ruta absoluta desde el directorio root.

Si el objetivo es un directorio, lista en consola todos los archivos y subdirectorios que estan dentro de el. Si es un archivo, retorna un mensaje diciendo que el objetivo es un archivo. Si la ruta esta mala, retorna un error en consola.

Esta función es de tipo void, por lo que no retorna nada.



%%%%%%%%%%%%%%%%%%%%%%%%  Fin funciones Generales %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Funciones de Manejo de Archivos}
Funciones definidas como de manejo de archivos en el enunciado y se encuentran en "cr\_API.c".


%%%%%%%%%%%%%%%%%%% Fin Funciones de manejo de archivos %%%%%%%%%%%%%%%%%%%%%%%%%
\section{Funciones Utiles}
Funciones definidas en "Util.c".

\subsection{encontra\_directorio(char* path, int posición)}
Función que recibe el nombre del archivo o directorio a buscar y la posición del bloque de directorio en el que se realizará la busqueda. 

Dada la posición entregada, es decir, el directorio dentro del cual se quiere buscar, se compara cada entrada del directorio con el nombre del archivo, para saber si existe dicho archivo o directorio dentro del directorio en el que se quiere buscar. 

Retorna un puntero al directorio o archivo encontrado y NULL en caso de que no exista dicho archivo o directorio.

\subsection{recorrer\_path(char* path}
Recibe el ruta absoluta desde root a un archivo o directorio especifico. 

Al ser un ruta absoluta se aprovecha la existencia del caracter "/" como separador y se itera para avanzar por los directorios utilizando los nombres de estos. Una vez encontrado cada nombre de subdirectorio o archivo, se utiliza la función $encontrar\_directorio$ para saber si existe dentro del directorio en el que nos encontramos. En caso de ser un directorio y no ser el objetivo, se procede a guardar su posición para poder comenzar a buscar dentro de este en la proxima iteración. 

Finalmente retorna un puntero al directorio o archivo final.

\subsection{directorio\_a\_agregar(char* path)}
Recibe una ruta absoluta desde root a un archivo o directorio.

Utiliza la estructura de un ruta absoluta para crear un arreglo con la ruta hasta el directorio en el que se encuentra contenido el archivo o directorio objetivo.

Retorna un la ruta hasta el directorio que contiene al objetivo.

\subsection{objective\_kind(char*path)}
Recibe el ruta absoluta desde root a un archivo o directorio.

Utiliza el bit de validez del directorio o archivo objetivo para saber si es un archivo o un directorio.

Finalmente retorna un 1 si el objetivo es directorio, un 0 si es archivo y un 23 en caso de que no exista la ruta dada.

\subsection{print\_ls(char* path)}
Recibe el ruta absoluta desde root a un archivo o directorio especifico.

Permite avanzar por los directorios hasta encontrar el objetivo y utiliza la función $encontrar\_directorio$ para obtener la posición del directorio dado, una vez que tiene la posicion donde se encuentra el archivo objetivo, entrega dicha posición a $print\_all$.

Esta función es de tipo void, por lo que no retorna nada.

\subsection{print\_all(int posicion)}
Recibe la posición de un archivo o directorio especifico.

A partir de la posición entregada, retorna todos los subdirectorios y archivos que se encuentran contenidos en el directorio especifico.

Esta función es de tipo void, por lo que no retorna nada.

\subsection{isBin(char* path)}
Recibe la ruta a un archivo o directorio especifico.

Se preocupa de ver si el archivo objetivo de la ruta es de extensión ".bin", compara las ultimas 4 letras de la ruta para saber esto.

Retorna un char* con un string de los ultimos 4 caracteres de la ruta.

% Fin del documento
\end{document}
